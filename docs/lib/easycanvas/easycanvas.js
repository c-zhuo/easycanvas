!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(39)},function(t,e){"use strict";var n={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},funcOrValue:function(t,e){return"function"==typeof t?t.call(e):t},execFuncs:function(t,e,r){t&&(n.isArray(r)||(r=[r])),"function"==typeof t?t.apply(e,r):n.isArray(t)&&t.length&&t.forEach(function(t){t&&t.apply(e,r)})},blend:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pointInRect:function(t,e,n,r,i,a){return!(n>t||t>r||i>e||e>a)},firstValuable:function(t,e,n){return void 0===t?void 0===e?n:e:t}};t.exports=n},function(t,e){"use strict";var n=3.141593;t.exports=function(t,e,r,i,a,o){var s=a?-a/180*n:0,l=t,c=e;return a&&(l=(t-r)*Math.cos(s)-(e-i)*Math.sin(s)+r,c=(t-r)*Math.sin(s)+(e-i)*Math.cos(s)+i),o?[l,c]:{x:l,y:c}}},,function(t,e){"use strict";t.exports={xywh:["sx","sy","sw","sh","tx","ty","tw","th"],txywh:["tx","ty","tw","th"],sxywh:["sx","sy","sw","sh"],devFlag:"__EASYCANVAS_DEVTOOL__",version:"0.7.2"}},,,,,function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r={},i=[],a=0,o=function t(e,o,s){var l=s||{},c=t.cacheCanvas;if("object"===(void 0===e?"undefined":n(e))){var u=e;return l.callbackArgs=l.callbackArgs||[],void t(u.shift(),function(e){l.callbackArgs.push(e),u.length>1?t(u,o,l):t(u[0],function(t){l.callbackArgs.push(t),o(l.callbackArgs)},l)},s)}var f=e+"_"+JSON.stringify(s)+"_"+c;if(r[f])return o?void(r[f].width&&o?o(r[f]):setTimeout(function(){t(e,o,s)},100)):r[f];var d=new Image;l.block?(d.src=e,a++):0===a?d.src=e:i.push({imgObj:d,src:e}),r[f]=d;var h=void 0;return(l.canvas||l.alphaColor||c)&&(h=document.createElement("canvas"),h.width=h.height||0,r[f]=h),d.onload=function(){if("jpg"===d.src.substr(-3)||"jpeg"===d.src.substr(-3)||"bmp"===d.src.substr(-3)?d.$noAlpha=!0:0===d.src.indexOf("data:image/jpg;")&&(d.$noAlpha=!0),l.block&&(a--,0===a&&(i.forEach(function(t){t.imgObj.src=t.src}),i.splice(0))),h&&(l.canvas||l.alphaColor||c)){var t=h.getContext("2d");if(h.width=d.width,h.height=d.height,h.$noAlpha=d.$noAlpha,t.drawImage(d,0,0),l.alphaColor){for(var e=t.getImageData(0,0,d.width,d.height),n=0;e.data.length>n;n+=4){var r=e.data[n]+e.data[n+1]+e.data[n+2],s=1;s>e.data[n]&&s>e.data[n+1]&&s>e.data[n+2]&&(e.data[n+3]=Math.floor(r/255))}t.putImageData(e,0,0),h.$noAlpha=!1}d=h}o&&o(d)},d.onerror=function(){r[f]=d},h||d};o.cacheCanvas=!1,t.exports=o},function(t,e){"use strict";function n(t,e){if(t&&t.match(/^data:/))return void(e&&e(t));if(i[t])return void(i[t]!==r?e(i[t]):setTimeout(function(){n(t,e)},100));i[t]=r;var a=new XMLHttpRequest;a.onload=function(){var n=new FileReader;n.onloadend=function(){i[t]=n.result,e&&e(n.result)},n.readAsDataURL(a.response)},a.open("GET",t),a.responseType="blob",a.send()}var r="processing",i={};t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(2),a=(r(i),3.141593);t.exports=function(t,e,n,r,i,o,s,l,c){var u=c?-c/180*a:0;return u&&(t=(t-s)*Math.cos(u)-(e-l)*Math.sin(u)+s,e=(t-s)*Math.sin(u)+(e-l)*Math.cos(u)+l),!(n>t||t>n+i||r>e||e>r+o)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(2),a=(r(i),n(11)),o=r(a);t.exports=function(t,e,n,r,i,a,s,l,c,u,f){if(!f){if(e>a+l)return!1;if(a>e+r)return!1;if(t>i+s)return!1;if(i>t+n)return!1}var d=(0,o.default)(t,e,i,a,s,l,c,u,f)||(0,o.default)(t+n,e,i,a,s,l,c,u,f)||(0,o.default)(t,e+r,i,a,s,l,c,u,f)||(0,o.default)(t+n,e+r,i,a,s,l,c,u,f);if(d)return!0;var h=(0,o.default)(i,a,t,e,n,r,c,u,-f)||(0,o.default)(i+s,a,t,e,n,r,c,u,-f)||(0,o.default)(i,a+l,t,e,n,r,c,u,-f)||(0,o.default)(i+s,a+l,t,e,n,r,c,u,-f);return!!h||(e>a&&a+l>e+r&&i>t&&t+n>i+s||t>i&&i+s>t+n&&a>e&&e+r>a+l)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(1),o=r(a),s=n(4),l=r(s),c=n(31),u=r(c),f=n(30),d=r(f),h=n(15),p=r(h),v=n(16),g=r(v),y=n(32),$=r(y),x=n(27),m=r(x),w=n(29),b=r(w),E=n(28),O=r(E),S=n(33),k=r(S),A=0,V=function t(e){e.children&&e.children.forEach(function(n,r){n.$id||(e.children[r]=new M(n)),e.$id&&!e.$dom?(e.children[r].$canvas=e.$canvas,e.children[r].$parent=e):e.children[r].$canvas=e,t(e.children[r])})},_=function(t){var e=t||{};e.$id||(e.$id=Math.random().toString(36).substr(2)),e.$tickedTimes=e.$tickedTimes||0,e.content=e.content||{},e.style=e.style||{},e.style.tx=e.style.tx||0,e.style.ty=e.style.ty||0,e.style.scale=o.default.firstValuable(e.style.scale,1),e.style.opacity=o.default.firstValuable(e.style.opacity,1),e.style.zIndex=e.style.zIndex||0,e.style.locate=e.style.locate||"center";o.default.funcOrValue(e.content.img);if(l.default.xywh.forEach(function(t){e.style[t]=e.style[t]||0}),e.events=e.events||{},"production"!==process.env.NODE_ENV)for(var n in e.events)"function"!=typeof e.events[n]&&"eIndex"!==n&&console.warn("[Easycanvas] Handler "+n+" is not a function.",e.events[n]);if("production"!==process.env.NODE_ENV&&(e.$addIndex=A++),e.events.eIndex=e.events.eIndex,e.hooks=e.hooks||{},"production"!==process.env.NODE_ENV&&(e.$perf={}),"production"!==process.env.NODE_ENV){if(!e.name&&e.content.img&&e.content.img.src){var r=e.content.img.src.match(/.*\/([^\/]*)$/);r&&r[1]&&(e.name=r[1])}e.name=e.name||"Unnamed Sprite"}return e.children=e.children||[],V(e),e.$cache={},e.$styleCacheTime={},e},T=function(t){var e=this;this.$extendList.forEach(function(n){n.call(e,t)})},M=function(t){var e=_(t);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this[n]=e[n]);return T.call(this,e),this};M.prototype.$extendList=[],M.prototype.add=function(t){if(t)return this.children.push(t),V(this),this.children[this.children.length-1]},M.prototype.getRect=function(t,e){var n=this,r={};if(l.default.txywh.forEach(function(t){r[t]=n.getStyle(t,e)}),0===r.tw&&this.content.img&&!t){var i=o.default.funcOrValue(this.content.img,this);r.tw=i.width,r.th=i.height}var a=this.getStyle("locate");return"lt"===a||("ld"===a?r.ty-=r.th:"rt"===a?r.tx-=r.tw:"rd"===a?(r.tx-=r.tw,r.ty-=r.th):(r.tx-=r.tw>>1,r.ty-=r.th>>1)),r},M.prototype.getSelfStyle=function(t){var e={};if(t)return o.default.funcOrValue(this.style[t],this);for(var n in this.style)e[n]=o.default.funcOrValue(this.style[n],this);return e},M.prototype.getStyle=function(t,e){var n=this;if(e&&void 0!==n.$cache[t])return n.$cache[t];var r=o.default.funcOrValue(n.style[t],n);if(n.$parent){var i=n.$parent.getStyle(t);if("tx"===t||"ty"===t)return i=o.default.firstValuable(i,0),i+o.default.firstValuable(r,0);if("scale"===t||"opacity"===t)return i=o.default.firstValuable(i,1),i*o.default.firstValuable(r,1)}return r},M.prototype.remove=function(t){return t?(this.$canvas.remove(t),void o.default.execFuncs(t.hooks.removed,t)):(this.$parent?this.$parent.remove(this):this.$canvas.remove(this),void o.default.execFuncs(this.hooks.removed,this))},M.prototype.update=function(t){if(t)for(var e in t)if("object"===i(t[e]))for(var n in t[e])this[e][n]=t[e][n];else this[e]=t[e]},M.prototype.getAllChildren=function(t){var e=this,n=t?[e]:[];return e.children.forEach(function(t){n=n.concat(t.getAllChildren(!0))}),n},M.prototype.getOuterRect=b.default,M.prototype.combine=O.default,M.prototype.uncombine=k.default,M.prototype.combineAsync=function(){return this.on("ticked",this.combine,100),this},M.prototype.nextTick=g.default,M.prototype.on=u.default,M.prototype.off=d.default,M.prototype.clear=p.default,M.prototype.trigger=$.default,M.prototype.broadcast=m.default,t.exports=M},,function(t,e){"use strict";t.exports=function(){this.children.forEach(function(t){t.remove()}),this.children=[]}},function(t,e){"use strict";t.exports=function(t){var e=function e(){t.apply(this,arguments),this.off("ticked",e)};this.on("ticked",e)}},,,,,,,,function(t,e){"use strict";var n=function(t){setTimeout(t,1e3/60)},r="undefined"!=typeof requestAnimationFrame?requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||n:n;t.exports=r},function(t,e,n){"use strict";var r=n(1),i=3.141593,a=function(t){return t.$lastPaintTime||Date.now()},o={linear:function(t,e,n){var r=a(this),i=!1,o=void 0,s=function(){var a=this.$lastPaintTime,l=(a-r)/n,c=(e-t)*l+t;if(i)if(e>t)for(;c>e;)c-=e-t;else for(;e>c;)c+=t-e;else e>t&&c>e?(s.$done=!0,c=e):t>e&&e>c&&(s.$done=!0,c=e);return l>=1&&o&&(o.call(this,c),o=null),c}.bind(this);return s.loop=function(){return i=!0,s},s.restart=function(){return r=a(this),s},s.then=function(t){return o=t,s},s},pendulum:function(t,e,n,r){var o=a(this),s=r||{};s.start=s.start||0;var l=!1,c=void 0,u=s.cycle||1,f=function(){var r=a(this),d=(r-o)/n;l?u&&(d%=u):u?d>u&&(d=u,f.$done=!0,d=u):d>1&&(f.$done=!0,d=1);var h=d*i*2-i/2+s.start/360*i,p=(e-t)*(Math.sin(h)+1)/2+t;return d>=u&&c&&(c.call(this,p),c=null),p}.bind(this);return f.loop=function(){return l=!0,f},f.restart=function(){return o=a(this),f},f.then=function(t){return c=t,f},f},ease:function(t,e,n){return this.pendulum(t,e,2*n,{cycle:.5})},oneByOne:function(t){var e=t,n=!1,r=function(){for(var t=0;e.length>t;t++){if(!e[t].$done)return e[t]();if(!e[t].$nextRestart&&(e[t].$nextRestart=!0,e[t+1]))return e[t+1].restart(),e[t+1]()}if(n){for(var r=0;e.length>r;r++)e[r].$done=!1,e[r].$nextRestart=!1,e[r].restart();return e[0]()}return e[e.length-1]()};return r.loop=function(){return n=!0,r},r}},s=function t(e,n,i,a,s){var l=(0,r.funcOrValue)(e[n]);"production"!==process.env.NODE_ENV&&void 0===l&&console.warn("[Easycanvas] start value in transition is undefined, using 0 instead."),l=l||0,e[n]=o[i].bind(t)(l,a,s)};for(var l in o)s[l]=o[l];t.exports=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(4),o=r(a),s=n(1),l=r(s);if("production"!==process.env.NODE_ENV&&!window[o.default.devFlag]){var c=window[o.default.devFlag]={isPaintRecording:!1,selectMode:!1,current:{},version:o.default.version,$canvas:{},$plugin:null},u={getSprite:function(t){if(!c.isPaintRecording)return[];var e={};if(t){var n=c.$canvas[t].children,r=function t(n){if(n.name!==o.default.devFlag){e[n.$id]={name:n.name,$addIndex:n.$addIndex,parent:n.$parent&&n.$parent.$id,style:{},children:n.children.filter(function(t){return t.name!==o.default.devFlag}).map(function(t){return t.$id}),rendered:n.$rendered};for(var r in n.style)e[n.$id].style[r]=l.default.funcOrValue(n.style[r],n);o.default.xywh.forEach(function(t){e[n.$id].style[t]=Math.round(e[n.$id].style[t])}),["physics","$perf"].forEach(function(t){e[n.$id][t]=n[t]}),n.webgl&&(e[n.$id].webgl={},["rx","ry","rz","tx","ty","tz"].forEach(function(t){e[n.$id].webgl[t]=l.default.funcOrValue(n.webgl[t],n)})),n.children&&n.children.sort(function(t,e){return e.$addIndex>t.$addIndex?-1:1}).forEach(t)}};n.sort(function(t,e){return e.$addIndex>t.$addIndex?-1:1}).forEach(r)}else for(var a in c.$canvas)e=i(e,c.$plugin.getSprite(a));return e},selectSpriteById:function(t,e){if(!e){for(var n in c.$canvas){var r=u.selectSpriteById(t,n);if(r)return{$sprite:r.$sprite||r,$canvas:c.$canvas[n]}}return!1}var i=function n(r){for(var i=0;r.length>i;i++){if(r[i].$id===t)return r[i];var a=n(r[i].children);if(a)return{$sprite:a.$sprite||a,$canvas:c.$canvas[e]}}return!1},a=c.$canvas[e].children,o=i(a);if(o)return{$sprite:o.$sprite||o,$canvas:c.$canvas[e]}},updateSprite:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"style",n=arguments[2],r=arguments[3],a=u.selectSpriteById(t,r).$sprite;a||console.warn("Sprite "+spriteId+" Not Found."),i(a[e],n)},highlightSprite:function(t,e,n){c.selectMode=!!e;var r=u.selectSpriteById(t,n),i=r.$sprite,a=r.$canvas;e&&a&&i?a.$plugin.selectSprite(!1,a,i):a&&a.$plugin.cancelSelectSprite(a)},sendGlobalHook:function(t,e){var n=u.selectSpriteById(t,e),r=n.$sprite,i=n.$canvas;console.log("%c window.$0 = %c Current Sprite("+r.name+") %c ","background:#4086f4 ; padding: 2px 0; border-radius: 2px 0 0 2px;  color: #fff","background:#41b883 ; padding: 2px; border-radius: 0 2px 2px 0;  color: #fff","background:transparent"),window.$0=r,window.$1=i},pause:function(t,e){var n=c.$canvas[t];n.$pausing=void 0!==e?e:!n.$pausing},getPerf:function(){var t={canvas:[],navigator:{clientWidth:document.body.clientWidth,clientHeight:document.body.clientHeight,devicePixelRatio:window.devicePixelRatio}};if(!c.isPaintRecording)return t;for(var e in c.$canvas)t.canvas.push({$id:e,name:c.$canvas[e].name,perf:c.$canvas[e].$perf,fps:c.$canvas[e].lastFps,size:{styleWidth:c.$canvas[e].$dom.getBoundingClientRect().width||parseInt(c.$canvas[e].$dom.style.width)||c.$canvas[e].$dom.width,styleHeight:c.$canvas[e].$dom.getBoundingClientRect().height||parseInt(c.$canvas[e].$dom.style.height)||c.$canvas[e].$dom.height,canvasWidth:c.$canvas[e].$dom.width,canvasHeight:c.$canvas[e].$dom.height}});return t}};c.$plugin=u}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i);t.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();this.hooks[e]&&a.default.execFuncs(this.hooks[e],this,t),t.unshift(e),this.children&&this.children.forEach(function(e){e.broadcast.apply(e,t)})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(1),o=r(a),s=1,l=2,c=3;t.exports=function(){var t=this;return setTimeout(function(){var e=t;if(e.$combine)return s;if(o.default.funcOrValue(e.style.visible,e)===!1)return c;var n=t.$canvas,r=e.getRect(!1,!0);if(0>r.tx||r.tr>n.width)return l;if(0>r.ty||r.tb>n.height)return l;for(var a=e.getAllChildren(!0),u=0;a.length>u;u++){var f=a[u],d=f.content.img;if(d&&d.src&&(!d.$painted||0===d.width||d.complete===!1||0===d.naturalHeight))return c;if(1!==f.getStyle("scale"))return c}var h=e.getOuterRect(!1,!0);if(h.tx=Math.floor(h.tx),h.ty=Math.floor(h.ty),h.tw=Math.round(h.tw),h.th=Math.round(h.th),h.tr=Math.round(h.tr),h.tb=Math.round(h.tb),0>h.tx||h.tr>n.width)return l;if(0>h.ty||h.tb>n.height)return l;var p=n.$children.filter(function(t){for(var e=0;a.length>e;e++)if(a[e].$id===t.$id)return!0}),v=n.$children,g=e.getStyle("opacity");p.forEach(function(t){t.settings.$combineGlobalAlpha=t.settings.globalAlpha,t.settings.globalAlpha=g>0?t.settings.globalAlpha/g:1}),n.$children=p,n.$paintContext.clearRect(0,0,n.width,n.height),n.$lastTickChildren=!1,n.$render(),p.forEach(function(t){t.settings.globalAlpha=t.settings.$combineGlobalAlpha});var y=document.createElement("canvas");y.width=h.tw,y.height=h.th;var $=y.getContext("2d");$.drawImage(n.$dom,h.tx,h.ty,h.tw,h.th,0,0,h.tw,h.th),e.children.forEach(function(t){t.$cache={}}),e.$combine={content:e.content,children:e.children,style:e.style},e.children=[],e.content={img:y};var x=e.getSelfStyle("tx")-(Math.floor(r.tx)-h.tx),m=e.getSelfStyle("ty")-(Math.floor(r.ty)-h.ty);return e.style=i({},e.style,{scale:1,tx:x,ty:m,tw:y.width,th:y.height,backgroundColor:void 0}),n.$children=v,n.$lastTickChildren=!1,n.paint(),e.off("ticked",t.combine),s}),this}},function(t,e){"use strict";t.exports=function(t,e){var n=this,r=n.getRect(t,e);return r.tr=r.tx+r.tw,r.tb=r.ty+r.th,this.children.forEach(function(n){var i=n.getOuterRect(t,e);r.tx>i.tx&&(r.tx=i.tx),r.ty>i.ty&&(r.ty=i.ty),i.tr>r.tr&&(r.tr=i.tr),i.tb>r.tb&&(r.tb=i.tb),r.tw=r.tr-r.tx,r.th=r.tb-r.ty}),r}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i);t.exports=function(t,e){this.hooks[t]&&(this.hooks[t]!==e&&this.hooks[t].$handle!==e&&e?a.default.isArray(this.hooks[t])&&(this.hooks[t].indexOf(e)<0?this.hooks[t].indexOf(e.$handle)<0||(this.hooks[t][this.hooks[t].indexOf(e.$handle)]=void 0):this.hooks[t][this.hooks[t].indexOf(e)]=void 0):delete this.hooks[t])}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i);t.exports=function(t,e,n){var r=e;if(n){var i=this;r=function(){var t=Date.now();if(t>r.$lastTriggerTime+n){r.$lastTriggerTime=t;var a=Array.prototype.slice.call(arguments);e.apply(i,a)}},r.$lastTriggerTime=-1,r.$handle=e}this.hooks[t]?a.default.isArray(this.hooks[t])?this.hooks[t].push(r):this.hooks[t]=[this.hooks[t],r]:this.hooks[t]=r}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i);t.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();if(this.hooks[e])return a.default.execFuncs(this.hooks[e],this,t)}},function(t,e){"use strict";var n=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};t.exports=function(){n(this,this.$combine),this.$combine=!1}},,,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(4),a=r(i),o=n(60),s=r(o),l=n(24),c=r(l),u=n(102),f=r(u),d=n(1),h=r(d),p=n(25),v=r(p),g=n(9),y=r(g),$=n(101),x=r($),m=n(103),w=r(m),b=n(13),E=r(b),O=n(26),S=(r(O),{painter:s.default,imgLoader:y.default,imgPretreat:x.default,multlineText:w.default,transition:v.default,tick:c.default,utils:h.default,mirror:f.default,class:{sprite:E.default},sprite:E.default,$version:a.default.version,env:process.env.NODE_ENV});S.extend=function(t){var e=S.sprite.prototype.$extendList;e.indexOf(t)<0&&e.push(t)},S.use=function(t){var e=S.painter.prototype.$extendList;e.indexOf(t)<0&&(t.onUse&&t.onUse(S),e.push(t))},S.component=function(t,e){t(S,e)};var k="undefined"!=typeof window;k&&(window.Easycanvas?console.warn("[Easycanvas] already loaded, it should be loaded only once."):"production"!==process.env.NODE_ENV&&setTimeout(function(){console.log("%c Easycanvas %c You are using the develop version "+a.default.version+" %c","background:#4086f4; padding: 2px 0; border-radius: 2px 0 0 2px;  color: #fff","background:#41b883; padding: 2px; border-radius: 0 2px 2px 0;  color: #fff","background:transparent")},500)),t.exports=S},,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(47),a=r(i),o=n(49),s=r(o),l=n(44),c=r(l),u=n(48),f=r(u),d=n(59),h=r(d),p={$render:s.default,$eventHandler:c.default,$perPaint:a.default,$rAFer:f.default};"production"!==process.env.NODE_ENV&&(p.$plugin=(0,h.default)()),t.exports=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i,a=n(1),o=r(a),s=n(4),l=r(s),c="undefined"!=typeof wx||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),u=function(t){return t.sort(function(t,e){return"production"!==process.env.NODE_ENV&&window[l.default.devFlag]&&window[l.default.devFlag].selectMode?o.default.funcOrValue(t.style.zIndex,t)<o.default.funcOrValue(e.style.zIndex,e)?1:-1:o.default.funcOrValue(o.default.firstValuable(t.events.eIndex,t.style.zIndex),t)<o.default.funcOrValue(o.default.firstValuable(e.events.eIndex,e.style.zIndex),e)?1:-1})},f=function(t,e){var n=t.getRect();return o.default.pointInRect(e.canvasX,e.canvasY,n.tx,n.tx+n.tw,n.ty,n.ty+n.th)},d=function t(e,n,r){if(e&&e.length&&!n.$stopPropagation)for(var i=e.length,a=0;i>a;a++){var s=e[a];if(o.default.funcOrValue(s.style.visible,s)!==!1&&(!s.events||"none"!==s.events.pointerEvents)){if(f(s,n)){var c=s.events.interceptor;if("production"!==process.env.NODE_ENV&&window[l.default.devFlag]&&window[l.default.devFlag].selectMode&&(c=!1),c){var d=o.default.firstValuable(c.call(s,n),n);if(!d||d.$stopPropagation)return}}var h=s.$combine?s.$combine.children:s.children;if(h.length&&t(u(h.filter(function(t){return"production"!==process.env.NODE_ENV&&window[l.default.devFlag]&&window[l.default.devFlag].selectMode?o.default.funcOrValue(t.style.zIndex,t)>=0:o.default.funcOrValue(o.default.firstValuable(t.events.eIndex,t.style.zIndex),t)>=0})),n,r),n.$stopPropagation)break;if(f(s,n)){if("production"!==process.env.NODE_ENV&&window[l.default.devFlag]&&window[l.default.devFlag].selectMode){if(s.name!==l.default.devFlag&&(n.stopPropagation(),s.$canvas.$plugin.selectSprite("click"===n.type||"touchend"===n.type,s.$canvas,s)))return;continue}return p(s,n,r),void n.stopPropagation()}h.length&&t(u(h.filter(function(t){return"production"!==process.env.NODE_ENV&&window[l.default.devFlag]&&window[l.default.devFlag].selectMode?o.default.funcOrValue(t.style.zIndex,t)<0:!(o.default.funcOrValue(o.default.firstValuable(t.events.eIndex,t.style.zIndex),t)>=0)})),n,r)}}},h=function(t,e){var n=this;this.$extendList.forEach(function(r){r.onEvent&&r.onEvent.call(n,t,e)})},p=function t(e,n,r){r&&r.push(e),e.events[n.type]&&(e.events[n.type].call(e,n),n.$stopPropagation)||e.$parent&&t(e.$parent,n,r)},v={x:0,y:0,timeStamp:0};i=function(t,e){var n=this,r=void 0,a=void 0,s=1,l=1;if(!e){!t.layerX&&t.targetTouches&&t.targetTouches[0]?(r=t.targetTouches[0].pageX-t.currentTarget.offsetLeft,a=t.targetTouches[0].pageY-t.currentTarget.offsetTop):!t.layerX&&t.changedTouches&&t.changedTouches[0]?(r=t.changedTouches[0].pageX-t.currentTarget.offsetLeft,a=t.changedTouches[0].pageY-t.currentTarget.offsetTop):(r=t.layerX,a=t.layerY);var f=!1;if(this.$dom.getBoundingClientRect){var g=this.$dom.getBoundingClientRect();s=Math.floor(g[f?"height":"width"])/this.width,l=Math.floor(g[f?"width":"height"])/this.height}}var y=e||{type:t.type,canvasX:r/s,canvasY:a/l,event:t};if(c&&n.fastclick){if("click"===y.type&&!y.$fakeClick)return;"touchstart"===y.type?(v.x=y.canvasX,v.y=y.canvasY,v.timeStamp=Date.now()):"touchend"===y.type&&Math.abs(v.x-y.canvasX)<30&&Math.abs(v.y-y.canvasY)<30&&Date.now()-v.timeStamp<200&&i.call(this,null,{$fakeClick:!0,type:"click",canvasX:v.x,canvasY:v.y,event:t})}if(y.stopPropagation=function(){y.$stopPropagation=!0},!n.events.interceptor||(y=o.default.firstValuable(n.events.interceptor.call(n,y),y),y&&!y.$stopPropagation)){var $=[];if(d(u(n.children),y,$),y&&!y.$stopPropagation&&p(n,y),h.call(n,y,$),("mousemove"===y.type||"touchmove"===y.type)&&n.eLastMouseHover&&$.indexOf(n.eLastMouseHover)===-1){var x=n.eLastMouseHover.events.mouseout||n.eLastMouseHover.events.touchout;x&&x.call(n.eLastMouseHover,y)}if(n.eLastMouseHover=$[0],!$.length&&n.eLastMouseHover){var m=n.eLastMouseHover.events.mouseout;m&&m.call(n.eLastMouseHover,y),n.eLastMouseHover=null}}},t.exports=i},function(t,e){"use strict";t.exports=function(t,e,n,r){if(0>e.sx&&e.sw){var i=-e.sx/e.sw;e.tx+=e.tw*i,e.sx=0}if(0>e.sy&&e.sh){var a=-e.sy/e.sh;e.ty+=e.th*a,e.sy=0}if(n&&e.sx+e.sw>n){var o=(e.sx+e.sw-n)/e.sw;e.sw-=e.sw*o,e.tw-=e.tw*o}if(r&&e.sy+e.sh>r){var s=(e.sy+e.sh-r)/e.sh;e.sh-=e.sh*s,e.th-=e.th*s}if(0>e.tx&&e.tw>-e.tx){var l=-e.tx/e.tw;e.sx+=e.sw*l,e.sw-=e.sw*l,e.tw=e.tw+e.tx,e.tx=0}if(0>e.ty&&e.th>-e.ty){var c=-e.ty/e.th;e.sy+=e.sh*c,e.sh-=e.sh*c,e.th=e.th+e.ty,e.ty=0}if(e.tw&&e.tx+e.tw>t.width){var u=(e.tx+e.tw-t.width)/e.tw;e.tw-=e.tw*u,e.sw-=e.sw*u}if(e.th&&e.ty+e.th>t.height){var f=(e.ty+e.th-t.height)/e.th;e.th-=e.th*f,e.sh-=e.sh*f}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i);t.exports=function(t,e,n){e.filter(function(t){var e=a.default.funcOrValue(t.style.zIndex,t);return 0>n?0>e:e>=0}).sort(function(t,e){var n=a.default.funcOrValue(t.style.zIndex,t),r=a.default.funcOrValue(e.style.zIndex,e);return n===r?0:n>r?1:-1}).forEach(function(e,n){t.$perPaint.call(t,e,n)})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i),o=n(4),s=(r(o),n(45)),l=r(s),c=n(46),u=r(c),f=n(12),d=r(f),h=a.default.blend,p=function(t){var e=/[^\u4e00-\u9fa5]/;return!e.test(t)},v=function(){var t=this;this.$canvas.$extendList.forEach(function(e){e.onPaint&&e.onPaint.call(t)})},g=function t(e){if(e&&e.style){var n=a.default.funcOrValue(e.style.scale,e);return 1!==n?e:t(e.$parent)}};t.exports=function(t,e){if(t.$rendered=!1,a.default.execFuncs(t.hooks.beforeTick,t,t.$tickedTimes),a.default.funcOrValue(t.style.visible,t)===!1)return void a.default.execFuncs(t.hooks.ticked,t,++t.$tickedTimes);var n=this;v.call(t);var r=t.$props={};r.img=a.default.funcOrValue(t.content.img,t),t.content.text&&(r.text=a.default.funcOrValue(t.content.text,t)),"string"==typeof r.img&&(r.img=t.content.img=n.imgLoader(r.img));var i=r.text,o=r.img;r.tx=a.default.funcOrValue(t.style.tx,t)||0,t.$parent&&(r.tx+=a.default.firstValuable(t.$parent.$cache.tx,0)),t.$cache.tx=r.tx,r.ty=a.default.funcOrValue(t.style.ty,t)||0,t.$parent&&(r.ty+=a.default.firstValuable(t.$parent.$cache.ty,0)),t.$cache.ty=r.ty;var s=0,c=0;o&&o.width&&(s=o.width||0,c=o.height||0,r.sx=a.default.funcOrValue(t.style.sx,t)||0,r.sy=a.default.funcOrValue(t.style.sy,t)||0,r.sw=a.default.funcOrValue(t.style.sw,t)||s,r.sh=a.default.funcOrValue(t.style.sh,t)||c,r.sx=Math.round(r.sx),r.sy=Math.round(r.sy),r.sw=Math.round(r.sw),r.sh=Math.round(r.sh)),r.tw=a.default.funcOrValue(t.style.tw,t)||r.sw||0,r.th=a.default.funcOrValue(t.style.th,t)||r.sh||0,r.locate=a.default.funcOrValue(t.style.locate,t),r.rotate=a.default.funcOrValue(t.style.rotate,t)||0,r.overflow=a.default.funcOrValue(t.style.overflow,t)||0,r.overflowX=a.default.funcOrValue(t.style.overflowX,t)||0,r.overflowY=a.default.funcOrValue(t.style.overflowY,t)||0,r.scale=a.default.funcOrValue(t.style.scale,t)||1,t.$parent&&(r.scale*=a.default.firstValuable(t.$parent.$cache.scale,1)),t.$cache.scale=r.scale;var f=t.children;if(1!==r.scale){var y=r.scale,$=g(t);if($){var x=$.getRect(t!==$),m=x.tx+x.tw/2,w=x.ty+x.th/2;r.tx-=(m-r.tx)*(y-1),r.ty-=(w-r.ty)*(y-1),r.tw*=y,r.th*=y}}"lt"===r.locate||("ld"===r.locate?r.ty-=r.th:"rt"===r.locate?r.tx-=r.tw:"rd"===r.locate?(r.tx-=r.tw,r.ty-=r.th):(r.tx-=r.tw>>1,r.ty-=r.th>>1)),r.tx=Math.round(r.tx),r.ty=Math.round(r.ty),r.tw=Math.round(r.tw),r.th=Math.round(r.th);var b={};if(r.rotate){r.rx=a.default.firstValuable(a.default.funcOrValue(t.style.rx,t),r.tx+.5*r.tw),r.ry=a.default.firstValuable(a.default.funcOrValue(t.style.ry,t),r.ty+.5*r.th);var E=a.default.firstValuable(r.rx,r.tx+.5*r.tw),O=a.default.firstValuable(r.ry,r.ty+.5*r.th);b.beforeRotate=[E,O],b.rotate=-r.rotate*Math.PI/180,b.rotate=+b.rotate.toFixed(4),b.afterRotate=[-E,-O]}var S=(0,d.default)(r.tx,r.ty,r.tw,r.th,0,0,n.width,n.height,b.beforeRotate&&b.beforeRotate[0],b.beforeRotate&&b.beforeRotate[1],r.rotate),k=(r.overflow||r.overflowX||r.overflowY)&&"visible"!==r.overflow;if(S||i){r.opacity=a.default.funcOrValue(t.style.opacity,t)||0,t.$parent&&(r.opacity*=a.default.firstValuable(t.$parent.$cache.opacity,1)),t.$cache.opacity=r.opacity;for(var A in t.style)void 0===r[A]&&(r[A]=a.default.funcOrValue(t.style[A],t));if(b.globalAlpha=a.default.firstValuable(r.opacity,1),(r.fh||r.fv)&&(r.fh=r.fh||0,r.fv=r.fv||0,r.fx=r.fx||0,r.fy=r.fy||0,b.transform={fh:r.fh,fv:r.fv,fx:-(r.ty+(r.th>>1))*r.fv+r.fx,fy:-(r.tx+(r.tw>>1))*r.fh+r.fy}),r.blend&&(b.globalCompositeOperation="string"==typeof r.blend?r.blend:h[r.blend]),r.backgroundColor&&(b.fillRect=r.backgroundColor),r.border&&(b.line=r.border),r.mirrX?(b.translate=[n.width,0],b.scale=[-1,1],r.tx=n.width-r.tx-r.tw,r.mirrY&&(b.translate=[n.width,n.height],b.scale=[-1,-1],r.ty=n.height-r.ty-r.th)):r.mirrY&&(b.translate=[0,n.height],b.scale=[1,-1],r.ty=n.height-r.ty-r.th),k&&(b.clip=!0),"production"!==process.env.NODE_ENV&&s&&c){var V=r.tw*r.th/(r.sw*r.sh);t.$perf.paintRate&&t.$perf.paintRate>=V||(t.$perf.paintRate=V)}if(b.clip&&S){var _={$id:t.$id,type:"clip",props:r};_.$origin=t,n.$children.push(_)}if(f.length&&(0,u.default)(n,f,-1),b.fillRect&&S){t.$rendered=!0;var T={$id:t.$id,type:"fillRect",settings:b,props:r};T.$origin=t,n.$children.push(T)}if(s&&0!==r.opacity&&r.sw&&r.sh){r.rotate||i||(0,l.default)(n,r,s,c);var M=(0,d.default)(r.tx,r.ty,r.tw,r.th,0,0,n.width-1,n.height-1,b.beforeRotate&&b.beforeRotate[0],b.beforeRotate&&b.beforeRotate[1],r.rotate);if(M){t.$rendered=!0;var N={$id:t.$id,type:"img",settings:b,img:o,props:r};o.$painted=!0,N.$origin=t,n.$children.push(N)}}if(i){t.$rendered=!0;var R=r.tx,F=r.ty,C=r.align||r.textAlign||"left",I=r.textFont||"14px Arial",P=parseInt(I),D="top",L=r.lineHeight||P;if("center"===C?R+=r.tw/2:"right"===C&&(R+=r.tw),"top"===r.textVerticalAlign?D="top":"bottom"===r.textVerticalAlign?(D="bottom",F+=r.th):"middle"===r.textVerticalAlign&&(F+=r.th>>1,D="middle"),"string"==typeof i||"number"==typeof i)F+2*P>0&&n.height>F-2*P&&n.$children.push({$id:t.$id,type:"text",settings:b,props:{tx:R,ty:F,content:i+"",fontsize:P,align:C,baseline:D,font:I,color:r.color,type:r.textType},$origin:t});else if(i.length)i.forEach(function(e){n.$children.push({$id:t.$id,type:"text",settings:b,props:{tx:R+a.default.funcOrValue(e.tx,t),ty:F+a.default.funcOrValue(e.ty,t),content:a.default.funcOrValue(e.content,t),fontsize:P,baseline:D,align:C,font:I,color:r.color,type:r.textType},$origin:t})});else if("multline-text"===i.type){var z=i.text.split(/\t|\n/),H=[];z.forEach(function(t,e){t=String.prototype.trim.apply(t),i.config.start&&(t=t.replace(i.config.start,""));for(var n=0,a=r.tw;t.length&&t.length>n;)a>0||(a=r.tw,H.push(t.substr(0,n)),t=t.substr(n),n=0),n++,a-=P*(p(t[n])?1.05:.6);(t||e)&&H.push(t)}),H.forEach(function(e){n.$children.push({$id:t.$id,type:"text",settings:b,props:{tx:R,ty:F,fontsize:P,content:e,baseline:D,align:C,font:I,color:r.color,type:r.textType},$origin:t}),F+=L||P})}}if(o||i||(t.$rendered=void 0),f.length&&(0,u.default)(n,f,1),b.clip&&S){var j={$id:t.$id,type:"clipOver",props:r};j.$origin=t,n.$children.push(j)}if(b.line&&S){t.$rendered=!0;var B={$id:t.$id,type:"line",settings:b,props:r};B.$origin=t,n.$children.push(B)}a.default.execFuncs(t.hooks.ticked,t,++t.$tickedTimes)}else k||(t.$rendered=void 0,f.length&&(0,u.default)(n,f,-1),f.length&&(0,u.default)(n,f,1)),a.default.execFuncs(t.hooks.ticked,t,++t.$tickedTimes)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(24),a=r(i),o=n(25),s=r(o);t.exports=function(t){var e=this,n=Date.now();s.default.$lastPaintTime=this.$nextTickTime=n,1e3>n-this.fpsCalculateTime||(this.fpsCalculateTime=n,this.fpsHandler&&this.fpsHandler.call(this,this.fps),this.lastFps=this.fps,this.fps=0),(0,a.default)(function(r){if(e.$rafTime=r,e.$rAFer(t),e.maxFps>0&&60>e.maxFps){if(1e3/e.maxFps>=n-e.$lastPaintTime)return;e.$lastPaintTime=n-(n-e.$lastPaintTime)%(1e3/e.maxFps)}else e.$lastPaintTime=Date.now();e.fps++,t()})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i),o=function(t,e){var n=this,r=!1;return this.$extendList.forEach(function(i){if(i.onRender){var a=i.onRender.call(n,t,e);a&&(r=a)}}),r},s=function(t,e){var n=this,r=t.props,i=void 0,s="text"===t.type;if(r&&"clip"!==t.type&&"clipOver"!==t.type&&"line"!==t.type){if(s){var l=r.content.length;i=r.fontsize*r.fontsize*9*l,r[5]=r.tx-1.5*r.fontsize*l,0>r[5]&&(r[5]=0),r[6]=r.ty-1.5*r.fontsize,0>r[6]&&(r[6]=0),r[7]=3*r.fontsize*l,r[5]+r[7]>n.width&&(r[7]=n.width-r[5]),r[8]=3*r.fontsize,r[6]+r[8]>n.height&&(r[8]=n.height-r[6])}else i=r.tw*r.th;if((i>4e4||s)&&!t.settings.transform&&!t.settings.rotate)for(var c=n.$children,u=c.length,f=e+1;u>f;f++){
var d=c[f];if(!d.$cannotCover)if("clip"!==d.type){var h=d.settings;if(d.type&&"img"===d.type||"fillRect"===d.type&&h.fillRect.indexOf("rgba")===-1){var p=d.props;if(p.tw*p.th<4e4)d.$cannotCover=!0;else if(p.tw*p.th>=i)if(!d.img||d.img.$noAlpha){if(1!==h.globalAlpha||h.globalCompositeOperation||h.transform||h.rotate)d.$cannotCover=!0;else if(a.default.pointInRect(r.tx,r.ty,p.tx,p.tx+p.tw,p.ty,p.ty+p.th)&&a.default.pointInRect(r.tx+r.tw,r.ty+r.th,p.tx,p.tx+p.tw,p.ty,p.ty+p.th))return void("production"!==process.env.NODE_ENV&&(t.$origin.$useless=!0))}else d.$cannotCover=!0}else d.$cannotCover=!0}else for(;u>f&&"clipOver"!==c[++f].type;);}}var v=t.settings||{};if(!o.call(n,t,v)){"production"!==process.env.NODE_ENV&&t.$origin&&(t.$origin.$useless=!1);var g=n.$paintContext;"clip"===t.type&&(g.save(),g.beginPath(),g.moveTo(r.tx,r.ty),g.lineTo(r.tx+r.tw,r.ty),g.lineTo(r.tx+r.tw,r.ty+r.th),g.lineTo(r.tx,r.ty+r.th),g.lineTo(r.tx,r.ty),g.closePath(),g.clip());var y=!1;v.globalCompositeOperation&&(y||(g.save(),y=!0),g.globalCompositeOperation=v.globalCompositeOperation),1===v.globalAlpha||isNaN(v.globalAlpha)||(y||(g.save(),y=!0),g.globalAlpha=v.globalAlpha),v.translate&&(y||(g.save(),y=!0),g.translate(v.translate[0]||0,v.translate[1]||0)),v.rotate&&(y||(g.save(),y=!0),g.translate(v.beforeRotate[0]||0,v.beforeRotate[1]||0),g.rotate(v.rotate||0),g.translate(v.afterRotate[0]||0,v.afterRotate[1]||0)),v.scale&&(y||(g.save(),y=!0),g.scale(v.scale[0]||1,v.scale[1]||1)),v.transform&&(y||(g.save(),y=!0),g.transform(1,v.transform.fh,v.transform.fv,1,v.transform.fx,v.transform.fy)),"img"===t.type?(g.drawImage(t.img,r.sx,r.sy,r.sw,r.sh,r.tx,r.ty,r.tw,r.th),"production"!==process.env.NODE_ENV&&n.$plugin.drawImage(n,r)):"text"===t.type&&r.content?(g.font=r.font,g.fillStyle=r.color||"white",g.textAlign=r.align,g.textBaseline=r.baseline,g[r.type||"fillText"](r.content,r.tx,r.ty)):"fillRect"===t.type?(g.fillStyle=v.fillRect,g.fillRect(r.tx,r.ty,r.tw,r.th)):"line"===t.type?(g.beginPath(),g.strokeStyle=r.border.substr(r.border.indexOf(" "))||"black",g.lineWidth=r.border.split(" ")[0]||1,g.moveTo(r.tx,r.ty),g.lineTo(r.tx+r.tw,r.ty),g.lineTo(r.tx+r.tw,r.ty+r.th),g.lineTo(r.tx,r.ty+r.th),g.closePath(),g.stroke()):"clipOver"===t.type&&g.restore(),y&&g.restore()}};t.exports=function(){var t=this;t.$children.forEach(s.bind(t))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(54),a=r(i),o=n(58),s=r(o),l=n(51),c=r(l),u=n(15),f=r(u),d=n(52),h=r(d),p=n(16),v=r(p),g=n(53),y=r(g),$=n(55),x=r($),m=n(56),w=r(m),b=n(57),E=r(b),O=n(13),S=r(O),k={start:s.default,paint:c.default,add:S.default.prototype.add,remove:a.default,register:y.default,clear:f.default,setFpsHandler:x.default,setMaxFps:w.default,pause:h.default,on:S.default.prototype.on,off:S.default.prototype.off,trigger:S.default.prototype.trigger,broadcast:S.default.prototype.broadcast,nextTick:v.default,getAllChildren:S.default.prototype.getAllChildren};"production"!==process.env.NODE_ENV&&(k.skeleton=E.default),t.exports=k},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i),o=function(t,e){if(!t||t.length!==e.length)return e;for(var n=0;t.length>n;n++){var r=t[n],i=e[n];if(r.$id!==i.$id||r.img!==i.img)return e;if(r.props&&i.props)for(var a in i.props)if(i.props[a]!==r.props[a])return e}return!1};t.exports=function(){if(!(this.$pausing||this.$inBrowser&&document.hidden)){var t=this;if(a.default.execFuncs(t.hooks.beforeTick,t,[t.$rafTime]),t.$freezing||(t.$lastTickChildren=t.$children,t.$children=[],"production"!==process.env.NODE_ENV&&t.$plugin.timeCollect(t,"preprocessTimeSpend","START"),this.children.sort(function(t,e){var n=a.default.funcOrValue(t.style.zIndex,t),r=a.default.funcOrValue(e.style.zIndex,e);return n===r?0:n>r?1:-1}).forEach(function(e,n){t.$perPaint(e,n)}),"production"!==process.env.NODE_ENV&&t.$plugin.timeCollect(t,"preprocessTimeSpend","END")),"production"!==process.env.NODE_ENV&&t.$plugin.timeCollect(t,"paintTimeSpend","START"),t.$paintContext.clearRect){var e=t.$nodiff?t.$children:o(t.$lastTickChildren,t.$children);e&&(t.$paintContext.clearRect(0,0,this.width,this.height),t.$render())}else t.$render();"production"!==process.env.NODE_ENV&&t.$plugin.timeCollect(t,"paintTimeSpend","END"),a.default.execFuncs(t.hooks.ticked,t,[t.$rafTime]),t.hooks.nextTick&&(a.default.execFuncs(t.hooks.nextTick,t,[t.$rafTime]),delete t.hooks.nextTick)}}},function(t,e){"use strict";t.exports=function(t){this.$pausing=void 0===t||t}},function(t,e){"use strict";var n=function(t){var e=this;this.$extendList.forEach(function(n){n.onCreate&&n.onCreate.call(e,t)})};t.exports=function(t,e){var r=this;"production"!==process.env.NODE_ENV&&(this.fpsHandler=this.fpsHandler||function(t){this.maxFps>0&&this.maxFps-5>t&&40>t&&console.warn("[Easycanvas] Low FPS detected ("+t+"/"+this.maxFps+").")});var i=e||{};t=this.$dom=t||this.$dom,"production"!==process.env.NODE_ENV&&(t||console.error('[Easycanvas] Not found <canvas> element in "register" function.'));for(var a in i)this[a]=i[a];if(this.name=i.name||t.id||t.classList&&t.classList[0]||"Unnamed",this.$inBrowser="undefined"!=typeof window,i.fullScreen&&"undefined"!=typeof document&&(t.width=t.style.width=document.body.clientWidth||document.documentElement.clientWidth,t.height=t.style.height=document.body.clientHeight||document.documentElement.clientHeight),"production"!==process.env.NODE_ENV&&(i.width&&t.attributes.width&&i.width!==t.width||i.height&&t.attributes.height&&i.height!==t.height)&&console.warn('[Easycanvas] Canvas size mismatched in "register" function.'),t.width=this.width=this.width||i.width||t.width,t.height=this.height=this.height||i.height||t.height,"production"!==process.env.NODE_ENV&&this.$plugin.register(this),this.events=i.events||{},this.hooks=i.hooks||{},this.$inBrowser){var o=["contextmenu","mousewheel","click","dblclick","mousedown","mouseup","mousemove","touchstart","touchend","touchmove"];o.forEach(function(e){t.addEventListener(e,r.$eventHandler.bind(r))})}return"production"!==process.env.NODE_ENV&&this.$paintContext&&console.error("[Easycanvas] Current instance is already registered."),n.call(this,i),this.$paintContext=this.$paintContext||t.getContext("2d"),this}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i);t.exports=function(t,e){var n=this;a.default.execFuncs(t.hooks.beforeRemove,t,t.$tickedTimes++),t.style.visible=!1,t.$removing=!0,setTimeout(function(){t.$parent?t.$parent.children=t.$parent.children.filter(function(t){return t.$removing!==!0}):n.children=n.children.filter(function(t){return t.$removing!==!0}),t.$canvas&&(t.$canvas=void 0,t.$parent=void 0,t.$tickedTimes=void 0,t.$cache=void 0,t.$rendered=!1,"production"!==process.env.NODE_ENV&&(t.$perf=void 0),a.default.execFuncs(t.hooks.removed,t,t.$tickedTimes))}),e&&this.children.splice(this.children.indexOf(t),1)}},function(t,e){"use strict";t.exports=function(t){this.fpsHandler=t}},function(t,e){"use strict";t.exports=function(t){this.maxFps=t||-1}},function(t,e){"use strict";"production"!==process.env.NODE_ENV&&(t.exports=function(){var t=this;t.children[0].__proto__.getAllChildren.call(t).forEach(function(t){t.uncombine(),t.$combine=!0}),t.paint(),t.children[0].__proto__.getAllChildren.call(t).forEach(function(t){t.$combine=!1});var e="";e+="var $SKL=document.getElementsByTagName('canvas')[0];",e+="$SKL.width="+t.width+";$SKL.height="+t.height+";",e+="$SKL.style.width='100%';$SKL.style.width='100%';",e+="var SKLIMG=[];",e+="var SKL = function(){",e+="var _=$SKL.getContext('2d');";var n=t.$children;n.forEach(function(t){var n=t.props,r=t.settings;"img"===t.type?(e+="_.globalAlpha="+r.globalAlpha+";",t.img&&t.img.$origin?(e+=t.img.$origin.join(";")+";",e+="_.drawImage(tempCanvas, "+n.sx+", "+n.sy+", "+n.sw+", "+n.sh+", "+n.tx+", "+n.ty+", "+n.tw+", "+n.th+");"):t.img&&t.img.src?(e+="var img = new Image();",e+="var imgUrl='"+t.img.src+"';if(SKLIMG.indexOf(imgUrl)===-1){SKLIMG.push(imgUrl);img.onload=function(){_.clearRect(0,0,$SKL.width,$SKL.height);SKL();}};",e+="img.src=imgUrl;",e+="_.drawImage(img, "+n.sx+", "+n.sy+", "+n.sw+", "+n.sh+", "+n.tx+", "+n.ty+", "+n.tw+", "+n.th+");"):(e+="_.fillStyle='#666';",e+="_.fillRect("+n.tx+", "+n.ty+", "+n.tw+", "+n.th+");")):"fillRect"===t.type&&(e+="_.globalAlpha="+r.globalAlpha+";",e+="_.fillStyle='"+r.fillRect+"';",e+="_.fillRect("+n.tx+", "+n.ty+", "+n.tw+", "+n.th+");")}),e+="_.globalAlpha=1;",e+="};SKL($SKL);",console.log(e)})},function(t,e){"use strict";t.exports=function(){return this.fpsCalculateTime=Date.now(),this.$rAFer(this.paint.bind(this)),this}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=(r(i),n(4)),o=r(a);t.exports=function(){if("production"!==process.env.NODE_ENV){var t="__EASYCANVAS_BRIDGE_TOPANEL__",e=function(e){e.tabId=window[o.default.devFlag].tabId,window.document.dispatchEvent(new CustomEvent(t,{detail:JSON.parse(JSON.stringify(e))}))},n="24px san-serif",r="18px san-serif",i=function(t,e){var r=document.createElement("canvas"),i=r.getContext("2d");return i.font=e||n,i.measureText(t).width};setTimeout(function(){e({name:"init"})});var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQYV2OYePb/fwAHrQNdl+exzgAAAABJRU5ErkJggg==",s=function(){var t=document.createElement("canvas");t.width=40,t.height=20;var e=t.getContext("2d");return e.beginPath(),e.moveTo(0,20),e.lineTo(40,20),e.lineTo(20,0),e.closePath(),e.fill(),t}(),l=null,c=null,u=["paintArea","paintTimes","paintTimeSpend","preprocessTimeSpend","loadArea","jumpArea"],f={drawImage:function(t,e){window[o.default.devFlag].isPaintRecording&&(e&&(t.$perf.$paintArea+=e[7]*e[8],t.$perf.$loadArea+=e[3]*e[4]),t.$perf.$paintTimes++)},jumpRender:function(t,e){t.$perf.$jumpArea+=e[7]*e[8]},register:function(t){t.$id=Math.random().toString(36).substr(2),t.$perf={},u.forEach(function(e){t.$perf[e]=0,t.$perf["$"+e]=0}),setInterval(function(){u.forEach(function(e){t.$perf[e]=t.$perf["$"+e],t.$perf["$"+e]=0})},1e3),t.$flags.devtoolHanged||(window[o.default.devFlag].$canvas[t.$id]=t,t.$flags.devtoolHanged=!0)},timeCollect:function(t,e,n){t.$perf["$"+e]+=("START"===n||"PAUSE"===n?-1:1)*Date.now()},selectSprite:function(t,u,d){if(window[o.default.devFlag].MaskCanvasBase64=a,!d||!window[o.default.devFlag].selectMode)return f.cancelSelectSprite(u),!1;if(!l){var h=0,p={},v={};l=u.add({name:o.default.devFlag,content:{img:u.imgLoader(a)},style:{border:function(){return this.getStyle("tw")<2&&this.getStyle("th")<2?"10 rgba(0, 0, 255, 0.5)":"1 blue"}},webgl:void 0,children:u.$paintContext.clearRect?[{name:o.default.devFlag,data:{},style:{locate:"center",tx:function(){var t=p.tx+p.tw/2;return 10>t-h/2?t=h/2+10:t+h/2>this.$canvas.width-10&&(t=this.$canvas.width-h/2-10),t-this.$parent.$cache.tx},ty:function(){var t=p.ty+p.th+30;return(this.data.above=t+30>this.$canvas.height)&&(t=p.ty-32),t-this.$parent.$cache.ty},tw:function(){return h},th:32,color:"orange",backgroundColor:"black",textVerticalAlign:"top",textAlign:"center",textFont:n},hooks:{beforeTick:function(){p=this.$parent.getRect(),this.content.text="<"+d.name+"> | "+Math.round(this.$parent.getStyle("tw"))+"Ã—"+Math.round(this.$parent.getStyle("th")),h=i(this.content.text)+20}},children:[{name:o.default.devFlag,content:{img:s},style:{tx:function(){return p.tx+p.tw/2-this.$parent.$cache.tx},ty:function(){return this.$parent.data.above?21:-21},tw:20,th:10,rotate:function(){return this.$parent.data.above?180:0}}}]},{name:o.default.devFlag,style:{visible:function(){return this.getStyle("tw")<this.data.value},locate:"center",tx:function(){var t=v.tx+(l.getSelfStyle("tx")-c.getSelfStyle("tx"))/2;return t-this.$parent.$cache.tx},ty:function(){var t=l.getSelfStyle("ty");return t-this.$parent.$cache.ty},tw:function(){return i(this.content.text,r)+10},th:20,backgroundColor:"#ddd",color:"black",textVerticalAlign:"middle",textAlign:"center",textFont:r},data:{},hooks:{beforeTick:function(){v=c.getRect(),this.data.value=Math.round(l.getSelfStyle("tx")-c.getSelfStyle("tx")),this.content.text="left: "+(this.data.value+"")}}},{name:o.default.devFlag,style:{visible:function(){return this.getStyle("th")<this.data.value},locate:"center",tx:function(){var t=l.getSelfStyle("tx");return t-this.$parent.$cache.tx},ty:function(){var t=v.ty+(l.getSelfStyle("ty")-c.getSelfStyle("ty"))/2;return t-this.$parent.$cache.ty},tw:function(){return i(this.content.text,r)+10},th:20,backgroundColor:"#ddd",color:"black",textVerticalAlign:"middle",textAlign:"center",textFont:r},data:{},hooks:{beforeTick:function(){v=c.getRect(),this.data.value=Math.round(l.getSelfStyle("ty")-c.getSelfStyle("ty")),this.content.text="top: "+(this.data.value+"")}}}]:[]}),c=u.add({name:o.default.devFlag,style:{locate:"lt"},children:[{name:o.default.devFlag,style:{locate:"lt",tx:0,ty:0,tw:function(){return l.getSelfStyle("tx")-this.$parent.getStyle("tx")},th:function(){return l.getSelfStyle("ty")-this.$parent.getStyle("ty")},backgroundColor:"rgba(140, 205, 255, 0.1)",border:"1 rgba(80, 120, 200, 0.9)"}}]})}if(["tx","ty","rotate","rx","ry","scale","tw","th","locate"].forEach(function(t){!function(t){l.style[t]=function(){return"tw"===t||"th"===t?d.getStyle(t)||d.getRect()[t]||.1:d.getStyle(t)}}(t)}),["tx","ty"].forEach(function(t){!function(t){c.style[t]=function(){return d.$parent?d.$parent.getStyle(t):0}}(t)}),l.style.zIndex=Number.MAX_SAFE_INTEGER,c.style.zIndex=Number.MAX_SAFE_INTEGER-1,l.style.visible=function(){return window[o.default.devFlag].selectMode&&d.$canvas},c.style.visible=function(){return window[o.default.devFlag].selectMode&&d.$parent&&d.$parent.$canvas},l.style.opacity=.8,l.webgl=d.webgl?{}:void 0){for(var g in d.webgl)!function(t){l.webgl[t]=function(){return"function"==typeof d.webgl[t]?d.webgl[t].call(d):d.webgl[t]}}(g);l.webgl.img=u.imgLoader(a),l.webgl.colors=!1,l.style.zIndex=Number.MIN_SAFE_INTEGER}return t&&(u.remove(l),u.remove(c),l=null,e({name:"selectSprite",id:u.$id,value:{sprite:d.$id,canvas:u.$id}}),window[o.default.devFlag].current={$sprite:d,$canvas:u},window[o.default.devFlag].selectMode=!1),!0},cancelSelectSprite:function(t){l&&(t.remove(l),t.remove(c),l=null)}};return f}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(50),a=r(i),o=n(43),s=r(o),l=n(61),c=r(l),u=n(9),f=r(u),d=function(t){this.imgLoader=f.default;for(var e in c.default)this[e]=this[e]||JSON.parse(JSON.stringify(c.default[e]));t&&(t.el||(t={el:t}),t.el&&this.register("string"==typeof t.el?document.querySelector(t.el):t.el,t))};d.prototype.$extendList=[];for(var h in s.default)Object.prototype.hasOwnProperty.call(s.default,h)&&(d.prototype[h]=s.default[h]);for(var p in a.default)Object.prototype.hasOwnProperty.call(a.default,p)&&(d.prototype[p]=a.default[p]);t.exports=d},function(t,e){"use strict";var n={$dom:null,$paintContext:null,$nextTickTime:0,$lastPaintTime:0,$pausing:!1,$freezing:!1,name:"",fps:0,lastFps:0,fpsCalculateTime:0,fpsHandler:null,width:0,height:0,events:{click:null},children:[],eHoldingFlag:!1,eLastMouseHover:null,maxFps:-1,$flags:{}};t.exports=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(9),a=r(i),o=n(10),s=r(o);t.exports=function(t,e){var n;return(0,s.default)(t,function(t){return(0,a.default)(t,function(t){for(var r=t.width,i=t.height,a=t.getContext("2d").getImageData(0,0,r,i),o=a.data,s=o.length-1;s>=0;s-=4)if(e&&e.conversion){var l=e.conversion({r:o[s-3],g:o[s-2],b:o[s-1],a:o[s]},(s+1>>2)%r,Math.floor((s+1>>2)/r));o[s-3]=l.r,o[s-2]=l.g,o[s-1]=l.b,o[s-0]=l.a}t.getContext("2d").clearRect(0,0,r,i),t.getContext("2d").putImageData(a,0,0),n=t},{canvas:!0,cacheFlag:Math.random()})}),function(){return n}}},function(t,e){"use strict";t.exports=function(t){var e=t.width,n=t.height,r=document.createElement("canvas");r.width=e,r.height=n;var i=r.getContext("2d");i.scale(1,-1),i.translate(0,-n),i.drawImage(t,0,0);var a=i.getImageData(0,0,e,n);return{canvas:i,img:a}}},function(t,e){"use strict";t.exports=function(t,e){return{type:"multline-text",text:t,config:e}}}])});